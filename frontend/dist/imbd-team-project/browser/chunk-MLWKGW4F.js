import{a as A}from"./chunk-TRPPY4LF.js";import{a as V}from"./chunk-Y4OVPVXT.js";import{b as F,c as k,e as u,g as C,h as _,k as N,m as L,n as M,o as E,q as I}from"./chunk-FMRYYTNH.js";import{t as R,v as D}from"./chunk-A4OJEWE2.js";import{a as P}from"./chunk-JMU6WUS3.js";import{a as y,b as w}from"./chunk-O3XRZV7M.js";import"./chunk-EQKMLW76.js";import{Gb as f,Ja as h,S as r,Ta as a,bc as v,cb as t,db as s,eb as d,kb as g,sc as S,tc as b,yb as m,za as l}from"./chunk-U6YJBN55.js";var G=p=>({"border-color":p}),T=class p{showPasswordValue=!1;loginForm;AppRoutesEnum=P;fb=r(E);router=r(S);snakeBar=r(D);signalService=r(R);authService=r(A);localStorageService=r(V);ngOnInit(){this.loginForm=this.fb.group({email:["",[u.required,u.email]],password:["",u.required],rememberMe:[!1]})}showPassword(){this.showPasswordValue=!this.showPasswordValue}login(){if(this.loginForm.valid){let c={email:this.loginForm.value.email,password:this.loginForm.value.password,rememberMe:this.loginForm.value.rememberMe};this.authService.login(c).subscribe({next:o=>{o.accessToken&&o.refreshToken&&o.userId&&(this.snakeBar.open("Login to account was completed successfully","",{duration:4e3}),this.localStorageService.setTokens(o),this.router.navigate([""]),this.loginForm.reset(),this.signalService.isLogin.set(!0),this.authService.getUser().subscribe(e=>{console.log(e),this.signalService.userData.set(e)}))},error:o=>{this.snakeBar.open(o.error.message,"",{duration:4e3})}})}else this.loginForm.markAllAsTouched()}static \u0275fac=function(o){return new(o||p)};static \u0275cmp=h({type:p,selectors:[["app-login"]],decls:19,vars:10,consts:[[1,"auth"],[1,"container"],[1,"auth-form",3,"formGroup"],[1,"auth-form-title"],[1,"inputs"],["type","text","formControlName","email","placeholder","Email",1,"input",3,"ngStyle"],["formControlName","password","placeholder","Password",1,"input",3,"type","ngStyle"],[3,"click","fontIcon"],["type","checkbox","formControlName","rememberMe",1,"auth-form-conditions"],[1,"auth-form-conditions-text"],[1,"btn","auth-form-button",3,"click"],[1,"auth-question"],[3,"routerLink"]],template:function(o,e){if(o&1&&(t(0,"section",0)(1,"div",1)(2,"form",2)(3,"div",3),m(4,"Log in to your account"),s(),t(5,"div",4),d(6,"input",5)(7,"input",6),t(8,"mat-icon",7),g("click",function(){return e.showPassword()}),s(),t(9,"label"),d(10,"input",8),t(11,"div",9),m(12," Remember me "),s()()(),t(13,"button",10),g("click",function(){return e.login()}),m(14,"Log in"),s(),t(15,"div",11),m(16," No account? "),t(17,"a",12),m(18,"Register"),s()()()()()),o&2){let i,n;l(2),a("formGroup",e.loginForm),l(4),a("ngStyle",f(6,G,(i=e.loginForm.get("email"))!=null&&i.invalid&&((i=e.loginForm.get("email"))!=null&&i.dirty||(i=e.loginForm.get("email"))!=null&&i.touched)?"red":"")),l(),a("type",e.showPasswordValue?"text":"password")("ngStyle",f(8,G,(n=e.loginForm.get("password"))!=null&&n.invalid&&((n=e.loginForm.get("password"))!=null&&n.dirty||(n=e.loginForm.get("password"))!=null&&n.touched)?"red":"")),l(),a("fontIcon",e.showPasswordValue?"visibility_off":"visibility"),l(9),a("routerLink","/"+e.AppRoutesEnum.SIGNUP)}},dependencies:[I,N,k,F,C,_,L,M,v,b,w,y],encapsulation:2,changeDetection:0})};export{T as LoginComponent};
