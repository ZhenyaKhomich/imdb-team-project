import{$ as m,M as a,S as d,U as l,Ub as f,Vb as g,Wb as p,ba as c,h as y,ja as b}from"./chunk-U6YJBN55.js";function h(s,e){!e?.injector&&l(h);let n=e?.injector??d(m),o=new y(1),u=p(()=>{let t;try{t=s()}catch(i){f(()=>o.error(i));return}f(()=>o.next(t))},{injector:n,manualCleanup:!0});return n.get(c).onDestroy(()=>{u.destroy(),o.complete()}),o.asObservable()}function w(s,e){let n=!e?.manualCleanup;n&&!e?.injector&&l(w);let o=n?e?.injector?.get(c)??d(c):null,u=k(e?.equal),t;e?.requireSync?t=b({kind:0},{equal:u}):t=b({kind:1,value:e?.initialValue},{equal:u});let i,v=s.subscribe({next:r=>t.set({kind:1,value:r}),error:r=>{if(e?.rejectErrors)throw r;t.set({kind:2,error:r})},complete:()=>{i?.()}});if(e?.requireSync&&t().kind===0)throw new a(601,!1);return i=o?.onDestroy(v.unsubscribe.bind(v)),g(()=>{let r=t();switch(r.kind){case 1:return r.value;case 2:throw r.error;case 0:throw new a(601,!1)}},{equal:e?.equal})}function k(s=Object.is){return(e,n)=>e.kind===1&&n.kind===1&&s(e.value,n.value)}export{h as a,w as b};
